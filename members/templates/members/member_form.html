{% extends "core/base.html" %}
{% load static %}

{% block title %}{{ page_title }} - Templo Digital{% endblock %}

{% block page_title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md">
    {# Adicionar enctype para upload de arquivos #}
    <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {# Coluna 1 #}
            <div class="space-y-6">
                <div>
                    <label for="{{ form.name.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.name.label }}</label>
                    {{ form.name }}
                    {% for error in form.name.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                <div>
                    <label for="{{ form.birth_date.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.birth_date.label }}</label>
                    {{ form.birth_date }}
                    {% for error in form.birth_date.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.gender.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.gender.label }}</label>
                    {{ form.gender }}
                    {% for error in form.gender.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.marital_status.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.marital_status.label }}</label>
                    {{ form.marital_status }}
                    {% for error in form.marital_status.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.phone.label }}</label>
                    {{ form.phone }}
                    {% for error in form.phone.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.email.label }}</label>
                    {{ form.email }}
                    {% for error in form.email.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.address.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.address.label }}</label>
                    {{ form.address }}
                    {% for error in form.address.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.member_type.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.member_type.label }}</label>
                    {{ form.member_type }}
                    {% for error in form.member_type.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
            </div>

            {# Coluna 2 #}
            <div class="space-y-6">
                 <div>
                    <label for="{{ form.baptism_date.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.baptism_date.label }}</label>
                    {{ form.baptism_date }}
                    {% for error in form.baptism_date.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.join_date.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.join_date.label }}</label>
                    {{ form.join_date }}
                    {% for error in form.join_date.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.origin_church.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.origin_church.label }}</label>
                    {{ form.origin_church }}
                    {% for error in form.origin_church.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.role.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.role.label }}</label>
                    {{ form.role }}
                    {% for error in form.role.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.status.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.status.label }}</label>
                    {{ form.status }}
                    {% for error in form.status.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.church.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.church.label }}</label>
                    {{ form.church }}
                    {% for error in form.church.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.photo.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.photo.label }}</label>
                    {{ form.photo }}
                    {% if form.photo.value %}
                        <p class="mt-2 text-sm text-gray-500">Atual: <a href="{{ form.photo.value.url }}" target="_blank" class="text-purple-600 hover:underline">{{ form.photo.value.name|truncatechars:30 }}</a></p>
                    {% endif %}
                    {% for error in form.photo.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 <div>
                    <label for="{{ form.notes.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ form.notes.label }}</label>
                    {{ form.notes }}
                    {% for error in form.notes.errors %}<p class="mt-2 text-sm text-red-600">{{ error }}</p>{% endfor %}
                </div>
                 {# Campo oculto para o usuário, se necessário #}
                 {{ form.user }}
            </div>
        </div>

        {# Botões de Ação #}
        <div class="mt-8 flex justify-end space-x-3 border-t border-gray-200 pt-6">
            <a href="{% if object %}{% url 'members:member_detail' object.pk %}{% else %}{% url 'members:member_list' %}{% endif %}" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                Cancelar
            </a>
            <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                {{ button_text }}
            </button>
        </div>
    </form>
</div>
{% endblock %}
